<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Socket.io Chat</title>
</head>


<body>

    <!-- Adding chat UI -->
    <div id="chat-container">
        <div id="message-list"></div>
        <input type="text" id="message-input" placeholder="Type your message...">
        <button id="send-button">Send</button>
    </div>

    <!-- The existing Socket.io connection code -->
    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
    <script>
        const userName = prompt("Please enter your name:");
        const socket = io.connect('http://localhost:3000');

        socket.on('connect', () => {
            socket.emit('join', userName);
        });

        // Here weâ€™ll add the event listeners for our chat interface

        const messageInput = document.getElementById("message-input");
        const messageList = document.getElementById("message-list");
        const sendButton = document.getElementById("send-button");

        sendButton.addEventListener('click', function () {
            const message = messageInput.value;
            if (message) {
                socket.emit('new_message', message); // Emitting the message to the server

                // Append the message to our chat
                const messageElem = document.createElement("div");
                messageElem.className = 'message';
                messageElem.innerHTML = `<strong>${userName}</strong>: ${message}`;
                messageList.appendChild(messageElem);

                // Clear the input
                messageInput.value = '';
            }
        });

        // Listen for new messages from the server
        socket.on('broadcast_message', function (data) {
            console.log(data)
            const msgElement = document.createElement('div');
            msgElement.className = 'message';
            msgElement.innerHTML = `<strong>${data.userName}</strong>: ${data.message}`;
            messageList.appendChild(msgElement);
        });

    </script>
</body>

</html>