<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Socket.io Chat</title>
</head>


<body>

    <!-- Adding chat UI -->
    <div id="chat-container">
        <div id="message-list"></div>
        <input type="text" id="message-input" placeholder="Type your message...">
        <button id="send-button">Send</button>
    </div>

    <!-- The existing Socket.io connection code -->
    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
    <script>
        const socket = io.connect('http://localhost:3000');

        // Here weâ€™ll add the event listeners for our chat interface

        const messageInput = document.getElementById("message-input");
        const messageList = document.getElementById("message-list");
        const sendButton = document.getElementById("send-button");

        sendButton.addEventListener('click', function () {
            const message = messageInput.value;
            if (message) {
                socket.emit('new_message', message); // Emitting the message to the server

                // Append the message to our chat
                const messageElem = document.createElement("div");
                messageElem.innerText = message;
                messageList.appendChild(messageElem);

                // Clear the input
                messageInput.value = '';
            }
        });

        // Listen for new messages from the server
        socket.on('broadcast_message', function (data) {
            const messageElem = document.createElement("div");
            messageElem.innerText = data;
            messageList.appendChild(messageElem);
        });

    </script>
</body>

</html>